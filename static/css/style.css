/* =========================================================
   ESCALA360 - Estilos Globais
   Autor: Anderson de Matos Guimarães
   Descrição: tema claro/escuro, layout responsivo, KPIs,
   tabelas, formulários, botões, toasts e animações.
   ========================================================= */

/* ---------- Reset e tokens básicos ---------- */
:root {
  --bg: #f7f7fb;
  --surface: #ffffff;
  --text: #1f2937;
  --muted: #6b7280;
  --border: #e5e7eb;
  --primary: #4f46e5;   /* indigo */
  --success: #16a34a;   /* green */
  --warning: #f59e0b;   /* amber */
  --danger:  #ef4444;   /* red */
  --accent:  #db2777;   /* pink */
  --radius: 12px;
  --shadow: 0 8px 24px rgba(2, 6, 23, .08);
  --shadow-sm: 0 4px 14px rgba(2, 6, 23, .06);
  --transition: 180ms cubic-bezier(.2,.7,.3,1);
}

@media (prefers-color-scheme: dark) {
  :root { color-scheme: dark; }
}

.dark {
  --bg: #0b1220;
  --surface: #0f172a;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --border: #1f2937;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --shadow-sm: 0 4px 14px rgba(0,0,0,.25);
}

/* ---------- Base ---------- */
html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans",
               "Apple Color Emoji", "Segoe UI Emoji";
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container {
  width: min(1120px, 92%);
  margin-inline: auto;
  padding-block: 24px 48px;
}

/* Utilitários */
.shadow    { box-shadow: var(--shadow); }
.shadow-sm { box-shadow: var(--shadow-sm); }
.rounded   { border-radius: var(--radius); }
.surface   { background: var(--surface); border: 1px solid var(--border); }
.muted     { color: var(--muted); }
.hidden    { display: none !important; }

/* Fade para transições de página */
.fade-in  { animation: fadeIn .25s ease-out both; }
.fade-out { animation: fadeOut .25s ease-in both; }
@keyframes fadeIn  { from {opacity:0; transform: translateY(4px)} to {opacity:1; transform:translateY(0)} }
@keyframes fadeOut { from {opacity:1} to {opacity:0} }

/* ---------- Navbar ---------- */
.navbar {
  position: sticky; top: 0; z-index: 40;
  backdrop-filter: saturate(1.2) blur(6px);
  background: color-mix(in oklab, var(--surface) 86%, transparent);
  border-bottom: 1px solid var(--border);
}

.navbar .brand {
  display: flex; align-items: center; gap: 10px;
  font-weight: 700; color: var(--text);
}
.navbar .brand .badge {
  font-size: .72rem; padding: 2px 8px; border-radius: 999px;
  background: color-mix(in oklab, var(--primary) 14%, transparent);
  color: var(--primary);
  border: 1px solid color-mix(in oklab, var(--primary) 22%, transparent);
}

/* Links da navbar como botões */
.nav-actions {
  display: flex; gap: 8px; flex-wrap: wrap;
}
.nav-btn {
  --bg-btn: color-mix(in oklab, var(--primary) 9%, var(--surface));
  --bd-btn: color-mix(in oklab, var(--primary) 22%, var(--border));
  display: inline-flex; align-items: center; gap: 8px;
  height: 36px; padding: 0 14px;
  font-weight: 600; font-size: .92rem;
  color: var(--primary);
  background: var(--bg-btn);
  border: 1px solid var(--bd-btn);
  border-radius: 10px;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
}
.nav-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-sm); }
.nav-btn.is-active { background: var(--primary); color: #fff; }

/* ---------- Cards KPI ---------- */
.kpi-grid {
  display: grid; gap: 16px;
  grid-template-columns: repeat(1, minmax(0,1fr));
}
@media (min-width: 640px) { .kpi-grid { grid-template-columns: repeat(2,1fr);} }
@media (min-width: 1024px){ .kpi-grid { grid-template-columns: repeat(4,1fr);} }

.kpi-card {
  display: grid; grid-template-columns: 56px 1fr; gap: 14px;
  padding: 18px; border-radius: var(--radius);
  color: #fff;
  box-shadow: var(--shadow);
}
.kpi-card .kpi-icon {
  display:flex; align-items:center; justify-content:center;
  width:56px; height:56px; border-radius: 14px;
  background: rgba(255,255,255,.16);
}
.kpi-card .kpi-info h3 { font-size: .9rem; opacity: .9; margin: 0 0 6px }
.kpi-card .kpi-info p  { margin: 0 }

/* ---------- Tabelas ---------- */
.table-container {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); box-shadow: var(--shadow-sm);
  overflow: hidden; overflow-x: auto;
}
.table {
  width: 100%; border-collapse: collapse; min-width: 720px;
}
.table th, .table td {
  padding: 12px 14px; text-align: left; white-space: nowrap;
  border-bottom: 1px solid var(--border);
}
.table thead th {
  background: color-mix(in oklab, var(--surface) 70%, var(--bg));
  color: var(--muted); font-size: .85rem; font-weight: 700;
}
.table tbody tr:hover { background: color-mix(in oklab, var(--primary) 7%, var(--surface)); }

/* Status tags */
.tag      { padding: 4px 10px; border-radius: 999px; font-weight: 700; font-size: .75rem; }
.tag.ok   { background: color-mix(in oklab, var(--success) 18%, transparent); color: var(--success); border:1px solid color-mix(in oklab, var(--success) 30%, transparent); }
.tag.warn { background: color-mix(in oklab, var(--warning) 18%, transparent); color: var(--warning); border:1px solid color-mix(in oklab, var(--warning) 30%, transparent); }
.tag.dng  { background: color-mix(in oklab, var(--danger) 18%, transparent);  color: var(--danger);  border:1px solid color-mix(in oklab, var(--danger) 30%, transparent); }

/* ---------- Formulários ---------- */
.form-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px; box-shadow: var(--shadow-sm);
}
.form-grid { display: grid; gap: 12px; }
@media (min-width: 768px){ .form-grid.two { grid-template-columns: repeat(2,1fr); } }

.label { font-size: .85rem; color: var(--muted); margin-bottom: 6px; display:block }

.input-field, .select-field, .time-field, .date-field {
  width: 100%; height: 42px; padding: 0 12px;
  background: var(--surface); color: var(--text);
  border: 1px solid var(--border); border-radius: 10px;
  transition: border var(--transition), box-shadow var(--transition);
}
.input-field:focus, .select-field:focus, .time-field:focus, .date-field:focus {
  outline: none; border-color: color-mix(in oklab, var(--primary) 55%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 20%, transparent);
}

/* ---------- Botões ---------- */
.btn {
  display:inline-flex; align-items:center; gap:10px;
  height: 42px; padding: 0 16px; border-radius: 10px;
  border: 1px solid transparent; cursor: pointer; user-select:none;
  font-weight: 700; transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
}
.btn:active { transform: translateY(0) scale(.99) }

.btn-primary {
  background: var(--primary); color: #fff; box-shadow: var(--shadow-sm);
}
.btn-primary:hover { filter: brightness(1.06); box-shadow: var(--shadow); }

.btn-outline {
  background: transparent; color: var(--primary);
  border-color: color-mix(in oklab, var(--primary) 45%, var(--border));
}
.btn-outline:hover {
  background: color-mix(in oklab, var(--primary) 10%, var(--surface));
  box-shadow: var(--shadow-sm);
}

.btn-ghost {
  background: transparent; color: var(--muted); border-color: var(--border);
}
.btn-ghost:hover { background: color-mix(in oklab, var(--surface) 70%, var(--bg)); }

/* ---------- Cards genéricos ---------- */
.card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px; box-shadow: var(--shadow-sm);
}

/* ---------- Toasts ---------- */
.toast {
  position: fixed; right: 22px; bottom: 22px; z-index: 60;
  background: var(--surface); border: 1px solid var(--border); color: var(--text);
  padding: 12px 16px; border-radius: 10px; box-shadow: var(--shadow);
  display:flex; align-items:center; gap:10px;
}
.toast.success { border-color: color-mix(in oklab, var(--success) 45%, var(--border)); }
.toast.error   { border-color: color-mix(in oklab, var(--danger) 45%, var(--border)); }
.toast.warn    { border-color: color-mix(in oklab, var(--warning) 45%, var(--border)); }

/* ---------- Área de gráficos ---------- */
.chart-surface {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 8px; box-shadow: var(--shadow-sm);
}

/* ---------- Helpers para ícones ---------- */
.icon-btn { width:36px; height:36px; display:inline-grid; place-items:center; border-radius: 9px; }
.icon-btn:hover { background: color-mix(in oklab, var(--primary) 11%, var(--surface)); color: var(--primary); }

/* ---------- Acessibilidade ---------- */
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}
