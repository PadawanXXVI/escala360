<!DOCTYPE html>
<html lang="pt-br"
      x-data="{ darkMode: localStorage.getItem('theme') === 'dark', menuOpen: false }"
      x-bind:class="{ 'dark': darkMode }"
      @load.window="darkMode = localStorage.getItem('theme') === 'dark'">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Escala360 - Sistema de gest√£o e visualiza√ß√£o de escalas e produtividade" />
  <title>{{ title if title else "Escala360" }}</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Fonte Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- √çcones -->
  <script src="https://kit.fontawesome.com/4b6d1b36d0.js" crossorigin="anonymous"></script>

  <style>
    :root { color-scheme: light dark; }

    body {
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }

    /* Navbar */
    .navbar {
      backdrop-filter: blur(12px);
      background-color: rgba(255, 255, 255, 0.85);
      transition: all 0.3s ease-in-out;
    }
    .dark .navbar {
      background-color: rgba(24, 24, 27, 0.85);
    }

    /* Links de navega√ß√£o */
    .nav-link {
      padding-bottom: 0.25rem;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease-in-out;
    }
    .nav-link:hover, .nav-active {
      color: #4f46e5;
      border-bottom-color: #4f46e5;
    }

    /* Anima√ß√µes globais */
    .fade-in { opacity: 0; animation: fadeIn 0.4s ease-in forwards; }
    @keyframes fadeIn { to { opacity: 1; } }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

  <!-- üîπ Navbar -->
  <header class="navbar sticky top-0 z-50 shadow-sm border-b border-gray-100 dark:border-gray-700">
    <nav class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between" aria-label="Main navigation">
      <!-- T√≠tulo -->
      <a href="{{ url_for('index') }}" class="text-2xl font-semibold tracking-tight text-indigo-600 dark:text-indigo-400 hover:text-indigo-500">
        Escala360
      </a>

      <!-- Menu Desktop -->
      <div class="hidden md:flex space-x-8 text-sm font-medium">
        <a href="{{ url_for('index') }}" class="nav-link {{ 'nav-active' if request.path == '/' else '' }}">Painel</a>
        <a href="{{ url_for('escalas_bp.view_escalas') }}" class="nav-link {{ 'nav-active' if request.path.startswith('/escalas') else '' }}">Escalas</a>
        <a href="{{ url_for('usuarios_bp.view_usuarios') }}" class="nav-link {{ 'nav-active' if request.path.startswith('/usuarios') else '' }}">Usu√°rios</a>
        <a href="{{ url_for('turnos_bp.view_turnos') }}" class="nav-link {{ 'nav-active' if request.path.startswith('/turnos') else '' }}">Turnos</a>
      </div>

      <!-- A√ß√µes -->
      <div class="flex items-center space-x-4">
        <!-- Bot√£o de tema -->
        <button id="darkToggle" class="text-gray-600 dark:text-gray-300 hover:text-indigo-500 transition" aria-label="Alternar tema">
          <i class="fas fa-adjust"></i>
        </button>

        <!-- Menu Mobile -->
        <button class="md:hidden text-gray-600 dark:text-gray-300 hover:text-indigo-500" @click="menuOpen = !menuOpen" aria-label="Menu">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Dropdown Mobile -->
    <div x-show="menuOpen" x-transition
         class="md:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-6 py-4 space-y-2">
      <a href="{{ url_for('index') }}" class="block nav-link {{ 'nav-active' if request.path == '/' else '' }}">Painel</a>
      <a href="{{ url_for('escalas_bp.view_escalas') }}" class="block nav-link {{ 'nav-active' if request.path.startswith('/escalas') else '' }}">Escalas</a>
      <a href="{{ url_for('usuarios_bp.view_usuarios') }}" class="block nav-link {{ 'nav-active' if request.path.startswith('/usuarios') else '' }}">Usu√°rios</a>
      <a href="{{ url_for('turnos_bp.view_turnos') }}" class="block nav-link {{ 'nav-active' if request.path.startswith('/turnos') else '' }}">Turnos</a>
    </div>
  </header>

  <!-- üîπ Conte√∫do din√¢mico -->
  <main class="flex-1 max-w-7xl mx-auto px-6 py-8 fade-in">
    {% block content %}{% endblock %}
  </main>

  <!-- üîπ Rodap√© -->
  <footer class="mt-auto border-t border-gray-100 dark:border-gray-800">
    <div class="max-w-7xl mx-auto py-4 px-6 text-center text-gray-500 dark:text-gray-400 text-sm">
      ¬© {{ now().year }} Escala360 ‚Äî Desenvolvido por Anderson de Matos Guimar√£es
    </div>
  </footer>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
