<!DOCTYPE html>
<html lang="pt-br"
      x-data="{ darkMode: localStorage.getItem('theme') === 'dark' }"
      x-bind:class="{ 'dark': darkMode }"
      @load.window="darkMode = localStorage.getItem('theme') === 'dark'">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Escala360 - Sistema de gestÃ£o e visualizaÃ§Ã£o de escalas, plantÃµes e produtividade" />
  <title>{{ title if title else "Escala360" }}</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Fonte Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- CSS Customizado -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

  {% block extra_head %}{% endblock %}

  <style>
    body {
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }

    /* ðŸ”¹ Navbar moderna */
    nav[role="navigation"] {
      backdrop-filter: blur(10px);
      background-color: rgba(255, 255, 255, 0.85);
      transition: background-color 0.3s ease;
    }

    .dark nav[role="navigation"] {
      background-color: rgba(24, 24, 27, 0.9);
    }

    /* ðŸ”¹ BotÃµes da navbar */
    .nav-btn {
      @apply px-3 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2;
    }

    .nav-btn:hover {
      @apply bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300;
    }

    .nav-active {
      @apply bg-indigo-500 text-white dark:bg-indigo-600;
    }

    /* ðŸ”¹ TransiÃ§Ãµes suaves */
    .fade-in {
      opacity: 0;
      animation: fadeIn 0.4s ease-in forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

  <!-- ðŸ”¹ CabeÃ§alho -->
  <header class="shadow-sm sticky top-0 z-50 border-b border-gray-100 dark:border-gray-700">
    <nav role="navigation" aria-label="NavegaÃ§Ã£o principal"
         class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between navbar">

      <!-- Marca -->
      <a href="{{ url_for('index') }}" class="text-2xl font-semibold tracking-tight text-indigo-600 dark:text-indigo-400 hover:text-indigo-500">
        Escala360
      </a>

      <!-- Menu principal -->
      <ul class="hidden md:flex space-x-2 items-center">
        <li>
          <a href="{{ url_for('index') }}"
             class="nav-btn {{ 'nav-active' if request.path == '/' else '' }}">
            <i class="fas fa-chart-line"></i> Painel
          </a>
        </li>
        <li>
          <a href="{{ url_for('escalas_bp.view_escalas') }}"
             class="nav-btn {{ 'nav-active' if request.path.startswith('/escalas') else '' }}">
            <i class="fas fa-calendar-alt"></i> Escalas
          </a>
        </li>
        <li>
          <a href="{{ url_for('profissionais_bp.view_profissionais') }}"
             class="nav-btn {{ 'nav-active' if request.path.startswith('/profissionais') else '' }}">
            <i class="fas fa-user-md"></i> Profissionais
          </a>
        </li>
        <li>
          <a href="{{ url_for('plantoes_bp.view_plantoes') }}"
             class="nav-btn {{ 'nav-active' if request.path.startswith('/plantoes') else '' }}">
            <i class="fas fa-clock"></i> PlantÃµes
          </a>
        </li>
        <li>
          <a href="{{ url_for('substituicoes_bp.view_substituicoes') }}"
             class="nav-btn {{ 'nav-active' if request.path.startswith('/substituicoes') else '' }}">
            <i class="fas fa-exchange-alt"></i> SubstituiÃ§Ãµes
          </a>
        </li>
        <li>
          <a href="{{ url_for('auditoria_bp.view_auditoria') }}"
             class="nav-btn {{ 'nav-active' if request.path.startswith('/auditoria') else '' }}">
            <i class="fas fa-clipboard-list"></i> Auditoria
          </a>
        </li>
      </ul>

      <!-- BotÃ£o tema -->
      <button id="darkToggle"
              class="text-gray-600 dark:text-gray-300 hover:text-indigo-500 transition"
              aria-label="Alternar modo claro/escuro">
        <i class="fas fa-adjust"></i>
      </button>
    </nav>
  </header>

  <!-- ðŸ”¹ ConteÃºdo principal -->
  <main id="conteudo-principal" role="main"
        class="flex-1 max-w-7xl mx-auto px-6 py-8 fade-in focus:outline-none">
    {% block content %}{% endblock %}
  </main>

  <!-- ðŸ”¹ RodapÃ© -->
  <footer role="contentinfo"
          class="mt-auto border-t border-gray-100 dark:border-gray-800 bg-white/40 dark:bg-gray-900/60 backdrop-blur-sm">
    <div class="max-w-7xl mx-auto py-4 px-6 text-center text-gray-500 dark:text-gray-400 text-sm">
      Â© {{ now().year }} <strong>Escala360</strong> â€” Desenvolvido por Anderson de Matos GuimarÃ£es
    </div>
  </footer>

  <!-- Scripts globais -->
  <script src="https://kit.fontawesome.com/4b6d1b36d0.js" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
