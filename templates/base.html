<!DOCTYPE html>
<html lang="pt-br" x-data="{ darkMode: localStorage.getItem('theme') === 'dark' }"
      x-bind:class="{ 'dark': darkMode }"
      @load.window="darkMode = localStorage.getItem('theme') === 'dark'">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Escala360 - Sistema de gestão e visualização de escalas e produtividade" />
  <title>{{ title if title else "Escala360" }}</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js (interatividade leve) -->
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Ícones Lucide -->
  <script src="https://unpkg.com/lucide@latest" defer></script>

  <!-- Fonte Inter (Google Fonts) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Estilos customizados -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

  <style>
    /* Animações de transição global */
    .fade-in {
      opacity: 0;
      animation: fadeIn 0.4s ease-in forwards;
    }
    .fade-out {
      opacity: 1;
      animation: fadeOut 0.25s ease-out forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    @keyframes fadeOut {
      to { opacity: 0; }
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

  <!-- 🔹 Navbar -->
  <header class="navbar bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50">
    <nav class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="Escala360" class="h-6 w-6">
        <a href="{{ url_for('index') }}" class="text-xl font-semibold tracking-wide hover:text-indigo-600">Escala360</a>
      </div>

      <div class="hidden md:flex space-x-6 text-sm font-medium">
        <a href="{{ url_for('index') }}" class="nav-link {{ 'nav-active' if request.path == '/' else '' }}">Painel</a>
        <a href="{{ url_for('escalas') }}" class="nav-link {{ 'nav-active' if request.path == '/escalas' else '' }}">Escalas</a>
      </div>

      <div class="flex items-center space-x-4">
        <!-- Botão de tema -->
        <button id="darkToggle" class="text-gray-600 dark:text-gray-300 hover:text-indigo-500 transition">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </nav>
  </header>

  <!-- 🔹 Conteúdo dinâmico -->
  <main class="flex-1 container mx-auto px-6 py-8 fade-in">
    {% block content %}{% endblock %}
  </main>

  <!-- 🔹 Rodapé -->
  <footer class="mt-auto">
    <div class="max-w-7xl mx-auto py-4 px-6 text-center text-gray-500 dark:text-gray-400 text-sm">
      © {{ now().year }} Escala360 — Desenvolvido por Anderson de Matos Guimarães
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://kit.fontawesome.com/4b6d1b36d0.js" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
