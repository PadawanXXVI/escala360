{% extends "base.html" %}
{% block title %}Painel de Produtividade – ESCALA360{% endblock %}

{% block content %}
<header class="mb-6">
  <h1 class="text-2xl font-semibold mb-1 flex items-center gap-2">
    <i class="fas fa-chart-line text-indigo-600"></i>
    Painel de Produtividade
  </h1>
  <p class="text-gray-600 dark:text-gray-400">
    Acompanhe indicadores, substituições e produtividade da equipe em tempo real.
  </p>
</header>

<!-- KPIs -->
<section aria-labelledby="indicadores" class="mb-8">
  <h2 id="indicadores" class="sr-only">Indicadores de Produtividade</h2>

  <div
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"
    id="kpi-container"
  >
    <div class="kpi-card bg-indigo-600 text-white">
      <div class="kpi-icon"><i class="fas fa-user-md"></i></div>
      <div class="kpi-info">
        <h3>Profissionais Ativos</h3>
        <p id="kpi-profissionais" class="text-2xl font-bold">–</p>
      </div>
    </div>

    <div class="kpi-card bg-green-600 text-white">
      <div class="kpi-icon"><i class="fas fa-clipboard-list"></i></div>
      <div class="kpi-info">
        <h3>Plantões</h3>
        <p id="kpi-plantoes" class="text-2xl font-bold">–</p>
      </div>
    </div>

    <div class="kpi-card bg-yellow-500 text-white">
      <div class="kpi-icon"><i class="fas fa-exchange-alt"></i></div>
      <div class="kpi-info">
        <h3>Substituições</h3>
        <p id="kpi-substituicoes" class="text-2xl font-bold">–</p>
      </div>
    </div>

    <div class="kpi-card bg-pink-600 text-white">
      <div class="kpi-icon"><i class="fas fa-percentage"></i></div>
      <div class="kpi-info">
        <h3>Produtividade</h3>
        <p id="kpi-produtividade" class="text-2xl font-bold">–%</p>
      </div>
    </div>
  </div>
</section>

<!-- Gráfico Plotly -->
<section aria-labelledby="grafico">
  <h2 id="grafico" class="sr-only">Produtividade Semanal</h2>

  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
    <div id="grafico-prod" style="height: 400px;"></div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    carregarPainelBI();
  });
</script>
{% endblock %}
