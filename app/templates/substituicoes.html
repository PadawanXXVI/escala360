{% extends "base.html" %}
{% block title %}Substitui√ß√µes ‚Äî Escala360{% endblock %}

{% block content %}
<!-- ============================================================ -->
<!-- üîÅ P√°gina: Solicita√ß√µes de Substitui√ß√£o -->
<!-- ============================================================ -->
<section class="text-center mb-4">
  <h1 class="fw-bold text-primary">Solicita√ß√µes de Substitui√ß√£o</h1>
  <p class="text-muted">Visualize as trocas de profissionais e o status de cada substitui√ß√£o.</p>
</section>

<main class="container">
  {% if substituicoes %}
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-primary">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Escala</th>
          <th scope="col">Solicitante</th>
          <th scope="col">Substituto</th>
          <th scope="col">Data da Solicita√ß√£o</th>
          <th scope="col" class="text-center">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for s in substituicoes %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ s.id_escala_original }}</td>
          <td>{{ s.id_profissional_solicitante }}</td>
          <td>{{ s.id_profissional_substituto }}</td>
          <td>{{ s.data_solicitacao.strftime("%d/%m/%Y %H:%M") }}</td>
          <td class="text-center">
            {% if s.status == "pendente" %}
              <span class="badge bg-warning text-dark">Pendente</span>
            {% elif s.status == "aprovado" %}
              <span class="badge bg-success">Aprovado</span>
            {% elif s.status == "recusado" %}
              <span class="badge bg-danger">Recusado</span>
            {% else %}
              <span class="badge bg-secondary">{{ s.status }}</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="text-center text-muted mt-4">Nenhuma solicita√ß√£o de substitui√ß√£o cadastrada.</p>
  {% endif %}
</main>
{% endblock %}
